(function(){var a,b=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};a=jQuery,a.fn.extend({detectCard:function(c){var d,e,f;return f={debug:!1,supported:["visa","mastercard","maestro","american-express","discover","jcb","diners-club"]},f=a.extend(f,c),e=function(a){if(f.debug)return"undefined"!=typeof console&&null!==console?console.log(a):void 0},d=function(){function a(){}return a.prototype.type="",a.prototype.detected_type="",a.prototype.number="",a.prototype.type_has_changed=function(){return this.type!==this.detected_type},a.prototype.detect_type=function(){return this.detected_type=this.get_detected_type(),null==this.detected_type&&(this.detected_type=""),e("Card type detected was: "+this.detected_type)},a.prototype.get_detected_type=function(){if(this.is_a_valid_number())return e("Card number '"+this.number+"' is valid"),this.get_type()},a.prototype.get_type=function(){return this.number.match(/^4/)?"visa":this.number.match(/^5[1-5]/)?"mastercard":this.number.match(/^3[47]/)?"american-express":this.number.match(/^6(?:011|5)/)?"discover":this.number.match(/^(?:2131|1800|35)/)?"jcb":this.number.match(/^3(?:0[0-5]|[68])/)?"diners-club":this.number.match(/^5018|5020|5038|5893|6304|67(59|61|62|63)|0604/)?"maestro":""},a.prototype.is_a_valid_number=function(){return""!==this.number&&!isNaN(this.number)},a.prototype.update_type=function(){return e("Changed card type from '"+this.type+"' to '"+this.detected_type+"'"),this.type=this.detected_type},a}(),this.each(function(){var c,e,g;return c=new d,a(this).on("keyup",function(d){var g,h;if(c.number=e(a(this).val()),c.detect_type(),c.type_has_changed())return c.update_type(),h=c.type,g=b.call(f.supported,h)>=0,a(this).trigger("cardChange",{type:c.type,supported:g})}),e=function(a){return g(a)},g=function(a){return a.replace(/\s/g,"")}})}})}).call(this);